/* src/App.css */
:root {
  /* --- GLOBAL ACCENT: PURPLE --- */
  --accent-primary: #8b5cf6; /* Violet 500 */
  --accent-hover: #7c3aed;   /* Violet 600 */
  --accent-bg: rgba(139, 92, 246, 0.1);
  --accent-bg-hover: rgba(139, 92, 246, 0.2);
  --accent-text: #8b5cf6;
  
  /* --- LAYOUT & COLORS (LIGHT) --- */
  --sidebar-width: 260px;
  --sidebar-bg-color: #f9fafb; /* Slightly lighter gray for freshness */
  --main-bg-color: #ffffff;
  --input-bg-color: #ffffff;
  --primary-text-color: #111827;
  --secondary-text-color: #6b7280;
  --border-color: #e5e7eb;
  --button-hover-bg: #f3f4f6;
  --assistant-message-bg: #f9fafb;
  
  /* --- COMPONENT SPECIFIC --- */
  --tooltip-bg-color: #1f2937;
  --tooltip-text-color: #ffffff;
  --code-block-header: #f3f4f6;
  --code-block-text: #374151;
  --code-text: #1f2937;
  --overlay-scrim: rgba(0, 0, 0, 0.4);

  /* --- ANIMATIONS --- */
  --ease-spring: cubic-bezier(0.4, 0, 0.2, 1); /* Unified motion curve */
  --anim-duration: 0.3s;
}

[data-theme="dark"] {
  /* --- GLOBAL ACCENT: PURPLE (Dark Mode Adjusted) --- */
  --accent-primary: #a78bfa; /* Violet 400 - Brighter for dark bg */
  --accent-hover: #c4b5fd;   /* Violet 300 */
  --accent-bg: rgba(139, 92, 246, 0.15);
  --accent-bg-hover: rgba(139, 92, 246, 0.25);
  --accent-text: #a78bfa;

  /* --- LAYOUT & COLORS (DARK) --- */
  --sidebar-bg-color: #18181b; /* Zinc 900 */
  --main-bg-color: #27272a;    /* Zinc 800 */
  --input-bg-color: #27272a;
  --primary-text-color: #f4f4f5;
  --secondary-text-color: #a1a1aa;
  --border-color: #3f3f46;
  --button-hover-bg: #3f3f46;
  --assistant-message-bg: #27272a;
  
  /* --- COMPONENT SPECIFIC --- */
  --tooltip-bg-color: #18181b;
  --tooltip-text-color: #f4f4f5;
  --code-block-header: #18181b;
  --code-block-text: #d4d4d8;
  --overlay-scrim: rgba(0, 0, 0, 0.7);
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  background-color: var(--main-bg-color);
  color: var(--primary-text-color);
  -webkit-font-smoothing: antialiased;
  transition: background-color var(--anim-duration) var(--ease-spring), color var(--anim-duration) var(--ease-spring);
}

/* Collapse logic */
body:has(.sidebar.is-collapsed) {
  --sidebar-width: 80px;
}

.app-container {
  display: flex;
  height: 100vh;
  width: 100vw;
  background-color: var(--main-bg-color);
  overflow: hidden;
  box-sizing: border-box;
  
  /* NEW: Add padding for the safe area (notch) since status bar is hidden */
  padding-top: env(safe-area-inset-top); 
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Responsive */
@media (max-width: 768px) {
  .app-container {
    /* Ensure header isn't cut off */
    padding-top: max(56px, env(safe-area-inset-top)); 
    height: 100vh;
  }
  :root { --sidebar-width: 0px; }
}

/* --- Loading Screens --- */
.initial-loading-screen {
  position: fixed;
  inset: 0;
  background-color: var(--main-bg-color);
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
}

@keyframes bouncing-loader {
  to {
    opacity: 0.3;
    transform: translateY(-0.5rem);
  }
}

.bouncing-loader {
  display: flex;
  justify-content: center;
  gap: 0.5rem;
}

.bouncing-loader > div {
  width: 0.75rem;
  height: 0.75rem;
  background: var(--accent-primary); /* Use accent color */
  border-radius: 50%;
  animation: bouncing-loader 0.6s infinite alternate;
}

.bouncing-loader > div:nth-child(2) { animation-delay: 0.2s; }
.bouncing-loader > div:nth-child(3) { animation-delay: 0.4s; }